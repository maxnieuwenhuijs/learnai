<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Utils Test</title>
</head>
<body>
    <h1>URL Utils Test</h1>
    <div id="test-results"></div>

    <script>
        // Simulate the urlUtils functions
        const getBaseUrl = () => {
            // Check if we're in production (on the server)
            if (window.location.hostname === 'app.howtoworkwith.ai' || 
                window.location.hostname === 'h2ww.ai' ||
                window.location.hostname === 'marktplaat.h2ww.ai' ||
                window.location.hostname === 'marktplaats.howtoworkwith.ai') {
                // Production: use the same domain with the same protocol (HTTP/HTTPS)
                const protocol = window.location.protocol;
                return `${protocol}//${window.location.hostname}`;
            }
            
            // Development: use localhost
            return 'http://localhost:5000';
        };

        const getApiBaseUrl = () => {
            return `${getBaseUrl()}/api`;
        };

        const getCompanyLogoUrl = (logoUrl) => {
            if (!logoUrl) return '';
            
            // If it's already a full URL, return as is
            if (logoUrl.startsWith('http')) {
                return logoUrl;
            }
            
            // If it starts with /, remove it to avoid double slashes
            const cleanPath = logoUrl.startsWith('/') ? logoUrl.slice(1) : logoUrl;
            
            return `${getBaseUrl()}/${cleanPath}`;
        };

        // Test the functions
        const testResults = document.getElementById('test-results');
        
        const tests = [
            {
                name: 'Current hostname',
                value: window.location.hostname
            },
            {
                name: 'Base URL',
                value: getBaseUrl()
            },
            {
                name: 'API Base URL',
                value: getApiBaseUrl()
            },
            {
                name: 'Company logo URL (relative)',
                value: getCompanyLogoUrl('/uploads/company-logos/company-10-1758019719226-c9553ccf2b103989.jpg')
            },
            {
                name: 'Company logo URL (no leading slash)',
                value: getCompanyLogoUrl('uploads/company-logos/company-10-1758019719226-c9553ccf2b103989.jpg')
            },
            {
                name: 'Company logo URL (already full URL)',
                value: getCompanyLogoUrl('https://example.com/logo.jpg')
            }
        ];

        tests.forEach(test => {
            const div = document.createElement('div');
            div.innerHTML = `<strong>${test.name}:</strong> ${test.value}`;
            testResults.appendChild(div);
        });
    </script>
</body>
</html>
